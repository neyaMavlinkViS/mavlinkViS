# diux ROS 2 Message and Publisher/Subscriber Package

The ROS 2 message package for *diux*.

This message package was generated by the *UxSDK for UCS* software development kit from Neya Systems (www.neyasystems.com).
It is designed to support ROS 2 (Crystal Clemmys).

## ROS 2 Message Files

UxSDK generates all message files needed to implement the services selected in the UxSDK.

## Building the diux Messages Package

To build the diux ROS 2 message package:

First, we must ensure that all ROS 2 message files do not have underscores in their file names.
To help with this, *UxSDK* creates a Bash shell script to rename any files with underscores.

To run the file, `cd diux_msgs/msg/` then run `bash fix_file_names.bash`.

Note: The Bash file will automatically delete itself after renaming the files.

Next, copy the *diux_msgs* directory to your ROS 2 workspace.

For example, `cp -R diux_msgs ~/ros2_ws/src/ros2/`

Next, build the *diux_msgs* message package using *colcon*.

`colcon build --symlink-install --packages-select diux_msgs`

Finally, run the following command (assuming you are running in Linux):

`. install/local_setup.bash`

## Building Example Publisher/Subscriber for diux

In addition to generating the ROS 2 messages listed above, *UxSDK for UCS* also
generates an example ROS 2 publisher/subscriber that can be used to bootstrap
development.  This example uses the ROS 2 message package built above.

First, copy the folder to your ROS2 workspace.

`cp -R diux ~/ros2_ws/src/ros2/`

Before you can build and run the example, you must enable at least one publisher or subscriber in the C++ source code.

For example, if you generated a Primitive Drive service, you'll need to edit the generated `PrimitiveDriver.cpp` file.

If you want to test publishing and subscribing to 'Set Wrench Effort' commands, uncomment the following lines:

`//auto publisher_node = std::make_shared<PrimitiveDriverSetWrenchEffortPublisher>();`

`//auto subscriber_node = std::make_shared<PrimitiveDriverSetWrenchEffortSubscriber>();`

Next, build the *diux* package using *colcon*.

`colcon build --symlink-install --packages-select diux`

This will generate one binary file for each service selected in *UxSDK*.  To have the
executable operate as a publisher, include `publish` as a command line argument.  Similarly,
to have the executable operate as a subscriber, include `subscribe` as a command line argument.

Finally, run the following command (assuming you are running in Linux):

`. install/local_setup.bash`

## Message List

The ROS 2 package for *diux_msgs* include many message definitions.  Below is a list of the high-level messages you will need
to implement the *diux* project:

| ROS Message File |
|----|
| msg/GeomagneticPropertyCommandReportType.msg |
| msg/GeomagneticPropertyCommandRequestType.msg |
| msg/GeomagneticPropertyCommandStatusType.msg |
| msg/GeomagneticPropertyCommandType.msg |
| msg/GeomagneticPropertyRequestType.msg |
| msg/GeomagneticPropertyStatusType.msg |
| msg/GlobalPoseCommandReportType.msg |
| msg/GlobalPoseCommandRequestType.msg |
| msg/GlobalPoseCommandStatusType.msg |
| msg/GlobalPoseCommandType.msg |
| msg/GlobalPoseRequestType.msg |
| msg/GlobalPoseStatusType.msg |
| msg/WrenchEffortCommandReportType.msg |
| msg/WrenchEffortCommandRequestType.msg |
| msg/WrenchEffortCommandStatusType.msg |
| msg/WrenchEffortCommandType.msg |
| msg/WrenchEffortRequestType.msg |
| msg/WrenchEffortStatusType.msg |

